<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Incoming Call</title>
  <style>
    :root{
      --bg:#0a0a0a;
      --white:#fff;
      --muted: rgba(255,255,255,.75);
      --muted2: rgba(255,255,255,.55);
      --green:#34C759;
      --red:#FF3B30;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--white);
      font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text",system-ui,sans-serif;
      overflow:hidden;
    }
    .stage{
      height:100dvh;
      padding: env(safe-area-inset-top) env(safe-area-inset-right)
               env(safe-area-inset-bottom) env(safe-area-inset-left);
      display:flex;
      flex-direction:column;
      position:relative;
    }
    .status{
      height:46px;
      padding:12px 18px 0;
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      font-weight:600;
      letter-spacing:.2px;
      color:rgba(255,255,255,.9);
      user-select:none;
    }
    .status .right{
      display:flex; gap:10px; align-items:center;
      font-size:.95rem;
      opacity:.9;
    }
    .pill{
      width:26px;height:12px;border:2px solid rgba(255,255,255,.85);
      border-radius:3px; position:relative;
    }
    .pill::after{
      content:"";
      position:absolute; right:-4px; top:3px;
      width:2px; height:6px; background: rgba(255,255,255,.85);
      border-radius:1px;
    }
    .pill .fill{
      height:100%; width:65%;
      background: rgba(255,255,255,.85);
    }
    .content{
      flex:1;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      padding-top:44px;
      text-align:center;
    }
    .name{
      font-size: clamp(2.1rem, 5vw, 3rem);
      font-weight:700;
      margin-top:12px;
      letter-spacing:.2px;
    }
    .sub{
      margin-top:10px;
      font-size:1.15rem;
      color:var(--muted);
    }
    .avatarWrap{
      margin-top:26px;
      width:132px;height:132px;
      border-radius:999px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), rgba(255,255,255,.06));
      border:1px solid rgba(255,255,255,.12);
      position:relative;
      display:grid;
      place-items:center;
      overflow:hidden;
    }
    .ring{
      position:absolute; inset:-22px;
      border-radius:999px;
      border:2px solid rgba(255,255,255,.10);
      animation:pulse 1.9s ease-in-out infinite;
    }
    .ring:nth-child(2){ inset:-36px; animation-delay:.35s; opacity:.8 }
    .ring:nth-child(3){ inset:-52px; animation-delay:.7s; opacity:.6 }
    @keyframes pulse{
      0%{ transform:scale(.92); opacity:.25 }
      50%{ transform:scale(1); opacity:.55 }
      100%{ transform:scale(.92); opacity:.25 }
    }
    .controls{
      padding:10px 18px calc(26px + env(safe-area-inset-bottom));
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:18px;
    }
    .btnCol{
      width:44%;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
      user-select:none;
    }
    .roundBtn{
      width:78px;height:78px;
      border-radius:999px;
      border:none;
      display:grid;
      place-items:center;
      color:white;
      font-size:1.65rem;
      font-weight:900;
      cursor:pointer;
      box-shadow: 0 20px 45px rgba(0,0,0,.45);
      transition: transform .12s ease, filter .12s ease;
      touch-action: manipulation;
    }
    .roundBtn:active{ transform:scale(.98); filter:brightness(.95); }
    .decline{ background:var(--red); }
    .answer{ background:var(--green); color:#041b10; }
    .label{ font-size:1.02rem; color:rgba(255,255,255,.88); letter-spacing:.2px; }

    /* Rejected overlay */
    .overlay{
      position:absolute; inset:0;
      background: rgba(0,0,0,.86);
      display:none;
      padding: env(safe-area-inset-top) 18px calc(18px + env(safe-area-inset-bottom));
      z-index:10;
      text-align:center;
    }
    .overlay.show{ display:flex; flex-direction:column; }
    .overlay h2{ margin:70px 0 8px; font-size:2rem; }
    .overlay p{
      margin:10px auto 18px;
      max-width:520px;
      color:rgba(255,255,255,.85);
      line-height:1.35;
      font-size:1.05rem;
    }
    .miniBtn{
      border:none;
      border-radius:999px;
      padding:14px 18px;
      font-weight:800;
      font-size:1.02rem;
      cursor:pointer;
      background: rgba(255,255,255,.92);
      color:#111;
      width:min(260px, 86vw);
      margin:0 auto;
      touch-action: manipulation;
    }

    /* Heartbreak */
    .heartStage{ width:160px; height:150px; margin:22px auto 10px; position:relative; }
    .heart{
      position:absolute;
      left:50%; top:40%;
      width:96px; height:96px;
      transform: translate(-50%, -50%) rotate(45deg);
      background:#ff4da3;
      border-radius:12px;
      box-shadow: 0 25px 60px rgba(255,77,163,.18);
    }
    .heart:before,.heart:after{
      content:""; position:absolute;
      width:96px;height:96px;
      background:inherit;
      border-radius:50%;
    }
    .heart:before{ left:-48px; top:0 }
    .heart:after{ left:0; top:-48px }
    .crack{
      position:absolute; inset:-10px;
      opacity:0;
      background:
        linear-gradient(90deg, transparent 47%, rgba(255,255,255,.95) 48%, transparent 49%),
        linear-gradient(120deg, transparent 40%, rgba(255,255,255,.9) 41%, transparent 42%),
        linear-gradient(60deg, transparent 55%, rgba(255,255,255,.85) 56%, transparent 57%);
      mix-blend-mode: overlay;
    }
    .broken .crack{ opacity:1; animation: crackFlash .65s ease 1; }
    @keyframes crackFlash{ 0%{opacity:0} 20%{opacity:1} 100%{opacity:.9} }

    .half{
      position:absolute;
      width:96px;height:96px;
      transform: translate(-50%, -50%) rotate(45deg);
      background:#ff4da3;
      border-radius:12px;
      display:none;
      left:50%; top:40%;
    }
    .half:before,.half:after{
      content:""; position:absolute;
      width:96px;height:96px;
      background:inherit; border-radius:50%;
    }
    .half:before{ left:-48px; top:0 }
    .half:after{ left:0; top:-48px }
    .leftHalf{ clip-path: polygon(0 0, 52% 0, 52% 100%, 0 100%); }
    .rightHalf{ clip-path: polygon(48% 0, 100% 0, 100% 100%, 48% 100%); }

    .broken .heart{ display:none; }
    .broken .half{ display:block; }
    .broken .leftHalf{ animation: fallL 1.15s ease forwards; }
    .broken .rightHalf{ animation: fallR 1.15s ease forwards; }
    @keyframes fallL{ to{ transform: translate(-70px, 30px) rotate(35deg); opacity:.15; } }
    @keyframes fallR{ to{ transform: translate(20px, 30px) rotate(55deg); opacity:.15; } }

    /* Answered overlay */
    .answered{
      position:absolute; inset:0;
      display:none;
      background: rgba(0,0,0,.68);
      z-index:9;
      padding: env(safe-area-inset-top) 18px calc(18px + env(safe-area-inset-bottom));
      text-align:center;
    }
    .answered.show{ display:flex; flex-direction:column; }
    .answered h2{ margin:70px 0 10px; font-size:2rem; }
    .answered p{ color:rgba(255,255,255,.85); font-size:1.05rem; line-height:1.35; }
    .wave{
      width:min(520px, 92vw);
      height:60px;
      margin:26px auto 0;
      display:flex;
      align-items:flex-end;
      justify-content:center;
      gap:6px;
      opacity:.9;
    }
    .bar{
      width:10px; height:16px;
      background: rgba(255,255,255,.9);
      border-radius:999px;
      animation: wave 1.1s ease-in-out infinite;
    }
    .bar:nth-child(2){ animation-delay:.1s }
    .bar:nth-child(3){ animation-delay:.2s }
    .bar:nth-child(4){ animation-delay:.3s }
    .bar:nth-child(5){ animation-delay:.4s }
    .bar:nth-child(6){ animation-delay:.5s }
    @keyframes wave{
      0%,100%{ height:14px; opacity:.55 }
      50%{ height:58px; opacity:1 }
    }
    .hangupBtn{
      margin:26px auto 0;
      width:90px;height:90px;
      border-radius:999px;
      border:none;
      background: var(--red);
      color:white;
      font-size:1.7rem;
      font-weight:900;
      cursor:pointer;
      box-shadow: 0 20px 45px rgba(0,0,0,.45);
    }

    @media (max-width:420px){
      .controls{ padding-bottom: calc(18px + env(safe-area-inset-bottom)); }
      .roundBtn{ width:74px; height:74px; }
    }
  </style>
</head>
<body>
  <div class="stage">
    <div class="status">
      <div id="clock">9:41</div>
      <div class="right">
        <span style="opacity:.9">5G</span>
        <div class="pill"><div class="fill"></div></div>
      </div>
    </div>

    <div class="content">
      <div class="name">Akhil</div>
      <div class="sub" id="subtitle">mobile</div>

      <div class="avatarWrap" aria-hidden="true">
        <div class="ring"></div>
        <div class="ring"></div>
        <div class="ring"></div>
      </div>

      <div class="sub" style="margin-top:22px; color:var(--muted2);" id="ringText">incoming call‚Ä¶</div>
    </div>

    <div class="controls">
      <div class="btnCol">
        <button class="roundBtn decline" id="declineBtn">‚úï</button>
        <div class="label">Decline</div>
      </div>
      <div class="btnCol">
        <button class="roundBtn answer" id="answerBtn">‚úì</button>
        <div class="label">Accept</div>
      </div>
    </div>

    <!-- Rejected overlay -->
    <div class="overlay" id="rejected">
      <h2>Call ended üíî</h2>
      <div class="heartStage" id="heartStage">
        <div class="heart"><div class="crack"></div></div>
        <div class="half leftHalf"></div>
        <div class="half rightHalf"></div>
      </div>
      <p>
        You rejected me üò≠<br>
        I‚Äôll go cry now‚Ä¶
      </p>
      <button class="miniBtn" id="retryBtn">Try again üòå</button>
    </div>

    <!-- Answered overlay -->
    <div class="answered" id="answered">
      <h2>Connected ‚ù§Ô∏è</h2>
      <p>OKKK:::PINEEEEEE.</p>
      <div class="wave" aria-hidden="true">
        <div class="bar"></div><div class="bar"></div><div class="bar"></div>
        <div class="bar"></div><div class="bar"></div><div class="bar"></div>
      </div>
      <button class="hangupBtn" id="hangupBtn">‚òé</button>
      <div style="margin-top:12px; color:rgba(255,255,255,.7); font-weight:650;">Hang up</div>
    </div>
  </div>

  <script>
    // ===== CONFIG: files are in the SAME folder as call.html =====
    const VOICE_URL = "./ann.mp3";  // your voice
    const CRY_URL   = "./cry.mp3";  // cry sound

    // Clock
    function pad(n){ return String(n).padStart(2,"0"); }
    function updateClock(){
      const d = new Date();
      document.getElementById("clock").textContent = `${pad(d.getHours())}:${pad(d.getMinutes())}`;
    }
    updateClock();
    setInterval(updateClock, 5000);

    // Audio objects
    const voiceAudio = new Audio(VOICE_URL);
    const cryAudio   = new Audio(CRY_URL);
    voiceAudio.preload = "auto";
    cryAudio.preload = "auto";

    // DOM
    const declineBtn = document.getElementById("declineBtn");
    const answerBtn  = document.getElementById("answerBtn");
    const rejected   = document.getElementById("rejected");
    const answered   = document.getElementById("answered");
    const heartStage = document.getElementById("heartStage");
    const retryBtn   = document.getElementById("retryBtn");
    const hangupBtn  = document.getElementById("hangupBtn");

    function stopAllAudio(){
      [voiceAudio, cryAudio].forEach(a => {
        try{ a.pause(); a.currentTime = 0; }catch(e){}
      });
    }

    function showRejected(){
      rejected.classList.add("show");
      heartStage.classList.add("broken");
      setTimeout(() => heartStage.classList.remove("broken"), 1400);
    }

    function showAnswered(){
      answered.classList.add("show");
    }

    declineBtn.addEventListener("click", async () => {
      stopAllAudio();
      showRejected();

      // Play cry sound (works because it's triggered by a user click)
      try { await cryAudio.play(); }
      catch(e){ /* ignore */ }
    });

    answerBtn.addEventListener("click", async () => {
      stopAllAudio();
      showAnswered();

      // Play your voice note
      try { await voiceAudio.play(); }
      catch(e){
        alert("Audio couldn't play. Check that ann.mp3 exists in the same folder and the filename matches exactly.");
      }
    });

    retryBtn.addEventListener("click", () => {
      stopAllAudio();
      rejected.classList.remove("show");
    });

    hangupBtn.addEventListener("click", () => {
      stopAllAudio();
      answered.classList.remove("show");
    });
  </script>
</body>
</html>
